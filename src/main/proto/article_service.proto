syntax = "proto3";

package auction;

option java_package = "auction.managment";
option java_multiple_files = true;

import "article_info.proto";
import "search_info.proto";
import "registration_info.proto";

message CreateArticleRequest { string user = 1; ArticleInfo info = 2; }

message CreateArticleResponse { bool upshot = 1; }

message SearchArticleRequest { SearchInfo info = 1; }

message SearchArticleResponse{ repeated ArticleInfo info = 1; }

message GetOwnedAuctionRequest{ string user = 1; }

message GetOwnedAuctionResponse{ repeated ArticleInfo info = 1; }

message RegisterForTheAuctionRequest{ RegistrationInfo info = 1; }

message RegisterForTheAuctionResponse{ bool upshot = 1; }

message GetUserActiveAuctionsRequest{ string user = 1; }

message GetUserActiveAuctionsResponse{ repeated ArticleInfo info = 1; }

message GetRegisteredAuctionsRequest{ string user = 1; }

message GetRegisteredAuctionsResponse{ repeated ArticleInfo info = 1; }

message MakeOfferRequest{
  int32 auctionId = 1;
  double amount = 2;
  string user = 3;
}

message MakeOfferResponse{
  bool upshot = 1;
}

/*
message SearchLaptopRequest { Filter filter = 1; }

message SearchLaptopResponse { Laptop laptop = 1; }

message UploadImageRequest {
  oneof data {
    ImageInfo info = 1;
    bytes chunk_data = 2;
  };
}

message ImageInfo {
  string laptop_id = 1;
  string image_type = 2;
}

message UploadImageResponse {
  string id = 1;
  uint32 size = 2;
}

message RateLaptopRequest {
  string laptop_id = 1;
  double score = 2;
}

message RateLaptopResponse {
  string laptop_id = 1;
  uint32 rated_count = 2;
  double average_score = 3;
}
*/
service ArticleService {
  rpc CreateArticle(CreateArticleRequest) returns (CreateArticleResponse) {};

  rpc SearchArticle(SearchArticleRequest) returns (SearchArticleResponse) {};

  rpc GetOwnedAuctions(GetOwnedAuctionRequest) returns (GetOwnedAuctionResponse) {};

  rpc RegisterForTheAuction(RegisterForTheAuctionRequest) returns (RegisterForTheAuctionResponse) {};

  rpc GetUserActiveAuctions(GetUserActiveAuctionsRequest) returns (GetUserActiveAuctionsResponse) {};

  rpc GetRegisteredAuctions(GetRegisteredAuctionsRequest) returns (GetRegisteredAuctionsResponse) {};

  rpc MakeOffer(MakeOfferRequest) returns (MakeOfferResponse) {};
  /*
  rpc SearchLaptop(SearchLaptopRequest) returns (stream SearchLaptopResponse) {
  };
  rpc UploadImage(stream UploadImageRequest) returns (UploadImageResponse) {};
  rpc RateLaptop(stream RateLaptopRequest) returns (stream RateLaptopResponse) {
  };
   */
}